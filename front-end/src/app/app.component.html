<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v6.1.1/css/all.css">
    <title>Document</title>
  </head>

  <body>
    <header>User Management</header>
    
    <div class="table-and-btn">
      <table>
          <tr>
              <th>ID</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Password</th>
              <th>Gender</th>
              <th>Update User</th>
              <th>Delete User</th>
          </tr>
          <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.first_name }}</td>
              <td>{{ user.last_name }} </td>
              <td>{{ user.email }}</td>
              <td>{{ user.password }}</td>
              <td>{{ user.gender }}</td>
              <th class="update">
                  <button (click)="open(contentUpdate); loadUserToUpdate(user);" class="update-btn"><i class="fa-solid fa-pen"></i></button>
              </th>
              <th class="delete">
                  <button (click)="open(contentDelete); loadUserToDelete(user);" class="delete-btn"><i class="fa-solid fa-xmark"></i></button>
              </th>
          </tr>
      </table>
  
      <div class="add">
          <button (click)="open(contentAdd)" class="add-btn"><i class="fa-solid fa-plus"></i> New User</button>    
      </div>
  </div>

  <ng-template #contentAdd let-modal>
      <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">New User</h4>
          <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>

        <div class="modal-body">
          <form [formGroup]="addUserForm" (ngSubmit)="addUser()">

            <input formControlName="id" type="text" placeholder="ID">

            <input formControlName="first_name" type="text" placeholder="First Name">

            <input formControlName="last_name" type="text" placeholder="Last Name">
            
            <input formControlName="email" type="text" placeholder="Email">
            
            <input formControlName="password" type="text" placeholder="Password">

            <select formControlName="gender" name="filieres">
              <option value="" disabled>Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
              
            <input (click)="modal.close('Save click')" [disabled]="!addUserForm.valid" type="submit" value="Add User">
          </form>
        </div>
  </ng-template>

  <ng-template #contentUpdate let-modal>
      <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Update User</h4>
          <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>

        <div class="modal-body">
          <form [formGroup]="updateUserForm" (ngSubmit)="updateUser()">
            
            <input formControlName="id" type="text" placeholder="ID">

            <input formControlName="first_name" type="text" placeholder="First Name">

            <input formControlName="last_name" type="text" placeholder="Last Name">
            
            <input formControlName="email" type="text" placeholder="Email">
            
            <input formControlName="password" type="text" placeholder="Password">

            <select formControlName="gender" name="filieres">
              <option value="" disabled>Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
              
            <input (click)="modal.close('Save click')" [disabled]="!updateUserForm.valid" type="submit" value="Update User">
          </form>
        </div>
  </ng-template>

  <ng-template #contentDelete let-modal>
      <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Delete User</h4>
          <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>

        <div class="modal-body">
            <div>Are you sure you want to delete this User ?</div>

            <button (click)="deleteUser(); modal.close('Save click');">Confirm</button>
        </div>
  </ng-template>
  </body>
</html>